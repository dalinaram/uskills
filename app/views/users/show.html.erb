<div data-controller="toggle" class="cardm">
  <!-- Contenu spécifique à l'enseignant -->
  <% if @user.role=='teach' %>
    <p>Ceci est du contenu spécifique à l'enseignant.</p>
    <% end %>

    <div class="skill-bar">
      <div class="bar-inner">
       
        <ul class="list-group list-group-flush">
          <% if @user.role=='teach' %>
     
   
   
    
    <%= render "shared/profilheader" %>
    <strong>Skills:</strong>
    <% @user.skills.each do |skill| %>
     
        
          <li class="list-group-item"><strong>Title:</strong> <%= @skill.title %></li>
          <li class="list-group-item"><strong>Description:</strong> <%= @skill.description %></li>
        
     
      <% end %>
        <% end %>
</ul>
</div>
<%= link_to "ADD Skills" ,  new_skill_path(@skill), class: "btn btn-warning my-2 my-sm-0 mx-5" %>
</div>

      <!-- ABOUT PART    content reservation to learn START  -->
      <section id="about" class="about-area pt-5 pb-5">
        <div class="container">
          <div class="row">
            <div class="col-lg-6">
              <div class="about-content mt-50">
                

                <% if @user.role=='teach' %>
                  <input data-action="click->toggle#fire" type="submit" value="Book this formation❤️"
                    class="btn btn-success mt-2" style="width: 100%">

                  <div class="col-4">
                    <div class="flat-show-card">
                      <div class="mt-2">
                        <div id="form" data-toggle-target="togglableElement" class="d-none">
                          <div class="cardm">
                            <%= simple_form_for([@user, @reservation]) do |b| %>
                              <div class="input">
                                <%= b.input :start_date, as: :string, input_html: { data: { controller: "datepicker" } }
                                  %>
                                  <%= b.input :end_date, as: :string, input_html: { data: { controller: "datepicker" } }
                                    %>
                              </div>
                              <%= b.submit class: "btn btn-info" %>
                                <% end %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <% end %>
              </div> <!-- about content reservation to learn END Here -->
            </div>
            <div class="col-xl-5 offset-xl-1 col-lg-6">
              <div class="about-skills pt-25">
               
              
               
                <!-- map PART start here -->
                <!-- <div class="cardimg">
                  <div data-controller="map"
                    data-map-api-key-value="pk.eyJ1IjoiZGFsaW5hbGVzb3VyZCIsImEiOiJjbG9teDd6MjgyeTZ3MmpwbDJqN253NmduIn0.TrksOV7ZrvFnBkvFnK7uvg">
                    <div style="width: 300px; height: 300px;" data-map-markers-value="<%= @markers.to_json %>">
                    </div>
                  </div>
                </div> -->
                  <!-- map PART ENDS -->
                  <% if @user.role=='teach' %>
                    <div class="cardm">
                      <%= render "shared/form" %>
                    </div>
                    <h3>Reviews</h3>
                    <div id="reviews-container">
                      <% @user.reviews.limit(3).each do |review| %>
                        <div>
                          <p>Star: <%= review.rating %> - Review: <br>
                              <%= review.content %>
                          </p>
                        </div>
                        <br>
                        <hr>
                        <% end %>

                          <div id="additional-reviews" style="display: none;">
                            <% @user.reviews.offset(3).each do |review| %>
                              <div>
                                <p>Star: <%= review.rating %> - Review: <br>
                                    <%= review.content %>
                                </p>
                              </div>
                              <br>
                              <hr>
                              <% end %>
                          </div>

                          <button id="toggle-reviews" class="btn btn-info mt-2">Voir plus</button>
                    </div>
                    <% else %>
                      <h1>student</h1>
                      <% end %>
                </div>
              </div>
            </div> <!-- row -->
          </div>
      </section>
      <!-- ABOUT PART ENDS -->

      <!-- CONTACT PART -->
      <%= link_to "Back Home" , root_path, class: "btn btn-secondary my-2 my-sm-0 mx-5" %>
        <% if @user.role=='learn' %>
          <%= link_to "Edit profile" , edit_user_path(@user), class: "btn btn-warning my-2 my-sm-0 mx-5" %>
            <% end %>
            <% if @user.role=='teach' %>
          <%= link_to "Edit profile t" , edit_user_path(@user), class: "btn btn-warning my-2 my-sm-0 mx-5" %>
            <% end %>
</div> <!-- Fin de la div cardm spécifique à l'enseignant -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const additionalReviews = document.getElementById('additional-reviews');
    const toggleButton = document.getElementById('toggle-reviews');

    if (additionalReviews && toggleButton) {
      toggleButton.addEventListener('click', function () {
        additionalReviews.style.display = (additionalReviews.style.display === 'none') ? 'block' : 'none';
      });
    }
  });
</script>